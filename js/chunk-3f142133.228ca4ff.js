(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f142133","chunk-2d0a4f2f"],{"092b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-image",{staticStyle:{width:"86px",height:"50px"},attrs:{src:t.scope.row.mainImage}})},o=[],a={props:{value:{type:Boolean,require:!0},scope:{default:null},myProps:{default:null}},computed:{},mounted:function(){},methods:{}},r=a,c=i("2877"),s=function(t){t.options.__source="src/views/activity/components/ActivityMainImage.vue"},l=s,d=Object(c["a"])(r,n,o,!1,null,null,null);"function"===typeof l&&l(d);e["default"]=d.exports},ca41:function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"a",(function(){return r})),i.d(e,"d",(function(){return c})),i.d(e,"c",(function(){return s})),i.d(e,"f",(function(){return l})),i.d(e,"b",(function(){return d}));var n=i("9bd2"),o=i("c276");function a(t){return Object(n["a"])({url:"/manager/activity/activity/list",method:"post",headers:{token:o["a"].cookies.get("token")},data:t})}function r(t){return Object(n["a"])({url:"/manager/activity/activity/add",method:"post",headers:{token:o["a"].cookies.get("token")},data:t})}function c(t){return Object(n["a"])({url:"/manager/activity/activity/get/"+t,method:"get",headers:{token:o["a"].cookies.get("token")}})}function s(t){return Object(n["a"])({url:"/manager/activity/activity/edit",method:"post",headers:{token:o["a"].cookies.get("token")},data:t})}function l(t){return Object(n["a"])({url:"/manager/activity/activity/remove/"+t,method:"post",headers:{token:o["a"].cookies.get("token")}})}function d(){return Object(n["a"])({url:"/manager/activity/activity/all",method:"get",headers:{token:o["a"].cookies.get("token")}})}},cdc9:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("d2-container",[i("template",{slot:"header"},[i("el-button",{attrs:{type:"success"},on:{click:t.showAddIndexActivity}},[t._v("新增首页活动")])],1),i("div",[i("d2-crud",{ref:"d2Crud",attrs:{columns:t.columns,data:t.data,loading:t.loading,pagination:t.pagination,rowHandle:t.rowHandle},on:{"custom-emit-1":t.showEditIndexActivity,"row-remove":t.removeIndexActivity,"pagination-current-change":t.paginationCurrentChange}})],1),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.addOrUpdateVisible},on:{"update:visible":function(e){t.addOrUpdateVisible=e}}},[i("el-form",{ref:"indexActivityForm",attrs:{model:t.form,"label-position":"top",rules:t.rules}},[i("el-form-item",{attrs:{label:"活动：",prop:"activityId"}},[i("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择活动"},model:{value:t.form.activityId,callback:function(e){t.$set(t.form,"activityId",e)},expression:"form.activityId"}},t._l(t.activityList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"序号（序号越小越靠前）：",prop:"seq"}},[i("el-col",{attrs:{span:3}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.seq,callback:function(e){t.$set(t.form,"seq",e)},expression:"form.seq"}})],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addOrUpdateVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveOrUpdate}},[t._v("确 定")])],1)],1)],2)},o=[],a=i("c276"),r=i("ca41"),c=i("9bd2");function s(t){return Object(c["a"])({url:"/manager/index/activity/list",method:"post",headers:{token:a["a"].cookies.get("token")},data:t})}function l(t){return Object(c["a"])({url:"/manager/index/activity/get/"+t,method:"get",headers:{token:a["a"].cookies.get("token")}})}function d(t){return Object(c["a"])({url:"/manager/index/activity/addorupdate",method:"post",headers:{token:a["a"].cookies.get("token")},data:t})}function u(t){return Object(c["a"])({url:"/manager/index/activity/remove/"+t,method:"post",headers:{token:a["a"].cookies.get("token")}})}var f=i("092b"),m={name:"index-activity-manager",data:function(){return{dialogTitle:"",addOrUpdateVisible:!1,form:{id:null,activityId:null,seq:""},rules:{activityId:[{required:!0,message:"请选择活动",trigger:"blur"}],seq:[{required:!0,message:"请输入序号",trigger:"blur"}]},tokenHeaders:{token:a["a"].cookies.get("token")},activityList:[],columns:[{title:"活动图片",key:"mainImage",component:{name:f["default"]}},{title:"活动标题",key:"title"},{title:"序号",key:"seq"}],rowHandle:{custom:[{text:"修改",icon:"el-icon-edit",type:"primary",size:"small",emit:"custom-emit-1"}],remove:{icon:"el-icon-delete",size:"small",fixed:"right",confirm:!0,confirmTitle:"提示",confirmText:"确定删除吗？"}},data:[],options:{stripe:!0},loading:!1,pagination:{currentPage:1,pageSize:5,total:0}}},mounted:function(){this.fetchData(),this.getActivityList()},methods:{paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;this.loading=!0,s({page:this.pagination.currentPage,limit:this.pagination.pageSize}).then((function(e){console.log(e),t.data=e.list,t.pagination.total=e.total,t.loading=!1})).catch((function(e){console.log("err",e),t.loading=!1}))},showAddIndexActivity:function(){this.form={id:null,activityId:null,seq:""},this.dialogTitle="新增",this.addOrUpdateVisible=!0},getActivityList:function(){var t=this;Object(r["b"])().then((function(e){t.activityList=e})).catch((function(e){console.log("err",e),t.loading=!1}))},showEditIndexActivity:function(t){var e=this,i=(t.index,t.row),n=i.id;this.dialogTitle="修改",this.addOrUpdateVisible=!0,l(n).then((function(t){e.form=t})).catch((function(t){console.log("err",t),e.loading=!1}))},saveOrUpdate:function(){var t=this;console.log(this.form),this.$refs["indexActivityForm"].validate((function(e){if(!e)return console.log("还有必填信息没有填写"),!1;d(t.form).then((function(e){console.log(e),t.addOrUpdateVisible=!1,t.pagination.currentPage=1,t.fetchData()})).catch((function(e){console.log("err",e),t.loading=!1}))}))},removeIndexActivity:function(t,e){var i=this,n=(t.index,t.row),o=n.id;u(o).then((function(t){i.$message({message:"删除成功",type:"success"}),e()})).catch((function(t){console.log("err",t),i.loading=!1}))}}},g=m,p=i("2877"),v=function(t){t.options.__source="src/views/index/index-activity-manager.vue"},h=v,y=Object(p["a"])(g,n,o,!1,null,null,null);"function"===typeof h&&h(y);e["default"]=y.exports}}]);